/*
  (c) LudvÃ­k Prokopec
  License: MIT
*/
!function(a){"use strict";void 0===a.ReactiveHTML&&(a.ReactiveHTML=function(){function a(a){return"object"==typeof a&&null!==a}function b(a){return a.reduce(function(a,c){return a.concat(Array.isArray(c)?b(c):c)},[])}function d(b){if(!a(b))return b;let c=Object.getPrototypeOf(b);return c&&(c=Object.getPrototypeOf(c))&&"Component"===(c=c.constructor).name?b.Vnode:b}function e(a){return a.map(a=>d(a))}function f(b){return a(b)?function(a){const b=document.createElement(a.tagName);for(const[c,d]of Object.entries(a.attrs))b.setAttribute(c,d);for(const[c,d]of Object.entries(a.events))b.addEventListener(c,d);for(const[c,d]of Object.entries(a.styles))b.style[c]=d;return a.children.forEach(a=>{const c=f(a);b.appendChild(c)}),a.realDOM=b}(b):document.createTextNode(b)}const g=(a,b)=>{const d=[];a.forEach((a,e)=>{d.push(c(a,b[e]))});const g=[];for(const c of b.slice(a.length))g.push(a=>(a.appendChild(f(c)),a));return a=>{for(const[b,c]of function(a,b){const c=[];for(let d=0;d<Math.min(a.length,b.length);d++)c.push([a[d],b[d]]);return c}(d,a.childNodes))b(c);for(const b of g)b(a);return a}},c=(b,c)=>{if(void 0===c)return a=>{a.remove()};if(!a(b)||!a(c))return b===c?()=>void 0:a=>{const b=f(c);return a.replaceWith(b),b};if(b.tagName!==c.tagName)return a=>{const b=f(c);return a.replaceWith(b),b};const d=function(a,b){const c=[];for(const[d,e]of Object.entries(b))e!==a[d]&&c.push(function(a){return a.setAttribute(d,e),a});for(const d in a)d in b||c.push(function(a){return a.removeAttribute(d),a});return function(a){for(const b of c)b(a)}}(b.attrs,c.attrs),e=g(b.children,c.children),h=((a,b)=>{const c=[];for(const[d,e]of Object.entries(b))e!==a[d]&&c.push(function(a){return a.style[d]=e,a});for(const d in a)d in b||c.push(function(a){return a.style[d]=null,a});return function(a){for(const b of c)b(a)}})(b.styles,c.styles);return a=>(d(a),e(a),h(a),a)};return{Component:class{constructor(b={},d=null){const f=Object.getPrototypeOf(this),g={classLink:this,get:(b,c)=>a(b[c])?new Proxy(b[c],g):b[c],set(a,b,d){a[b]=d;const e=f.Element(this.classLink.props,this.classLink.args);if(this.classLink.Vnode.realDOM){const a=c(this.classLink.Vnode,e);e.realDOM=a(this.classLink.Vnode.realDOM)}return Object.assign(this.classLink.Vnode,e),!0}};return this.props=new Proxy(b,g),this.args=d,this.SetValue=function(a){const b=this;return function(a){return new Promise(function(b){b(a)})}(a).then(function(){const a=f.Element(b.props,b.args);if(b.Vnode.realDOM){const d=c(b.Vnode,a);a.realDOM=d(b.Vnode.realDOM)}return Object.assign(b.Vnode,a),b}),a},this.Vnode=f.Element(this.props,this.args),this}},Render:function(a,b){return function(a,b){return b.appendChild(a),a}(f(d(a)),b)},Await:function(a,b){new MutationObserver(function(c,d){for(var e=0;e<c.length;e++)for(var f=0;f<c[e].addedNodes.length;f++)c[e].addedNodes[f].nodeType===Node.ELEMENT_NODE&&c[e].addedNodes[f].matches(a)&&(b(c[e].addedNodes[f]),d.disconnect())}).observe(document.documentElement,{childList:!0,subtree:!0})},CreateElement:function(a,c,...d){null===c&&(c={});const f=function(a){let b={},c={};for(const[d,e]of Object.entries(a))d.startsWith("on")&&(b[d.replace("on","")]=e,delete a[d]),"style"===d&&(c=e,delete a[d]);return{attrs:a,events:b,styles:c}}(c);return{tagName:a,attrs:f.attrs,children:e(b(d)),events:f.events,styles:f.styles}}}}())}(window);
